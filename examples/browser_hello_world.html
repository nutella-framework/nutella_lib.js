<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Nutella hello world</title>
</head>
<body>

<script src="../dist/nutella_lib.js"></script>

<script>
    // Initialize nutella
    debugger;
    var nutella = NUTELLA.init('localhost', 'rptest', 'default', 'demo_run_interface', function(success) {
        if (success)
            console.log("Successfully connected nutella!");
        else
            console.log("Error connecting!");
    }, {secure: true});
    nutella.setResourceId('r_id');

    nutella.location.ready(function() {console.log(nutella.location.resources);});

    // Initialize nutella app interface
//    var nutella = NUTELLA.initApp('ltg.evl.uic.edu', 'test', 'demo_app_interface');
//    nutella.setResourceId('r_id');
//    nutella.app.net.publish_to_all_runs('channel', 'ale_message');

    // Initialize nutella fr interface
//    var nutella = NUTELLA.initFramework('ltg.evl.uic.edu', 'demo_fr_interface');
//    nutella.setResourceId('r_id');
    // nutella.f.net.publish_to_all_runs('channel', 'message');

    // Simple channel pub/sub
    //    nutella.net.subscribe('channel', function(message, from) {
    //        console.log('Received: "' + message + '" from: ' + JSON.stringify(from));
    //    }, function() {
    //        nutella.net.publish('channel', 'message');
    //    });

    // Simple channel req/res
    //    nutella.net.handle_requests('channel', function(req, from){
    //        console.log('Received: "' + req + '" from: ' + JSON.stringify(from));
    //        return {some: 'json'};
    //    }, function() {
    //        nutella.net.request('channel', 'hey you', function(res){
    //            console.log('Response is : "' + JSON.stringify(res));
    //        });
    //    });

    // Wildcard pub/sub
//    nutella.net.subscribe('#', function(message, channel, from) {
//        console.log('Received: "' + JSON.stringify(message) + '" on channel: "'+ channel +'" from: ' + JSON.stringify(from));
//    }, function() {
//        nutella.net.publish('channel_1', 'message');
//        nutella.net.publish('channel_2', 'message');
//    });


    // Wildcard req/res
//        nutella.net.handle_requests('#', function(req, from){
//            console.log('Received: "' + req + '" from: ' + JSON.stringify(from));
//            return {some: 'json'};
//        }, function() {
//            nutella.net.request('channel_1', 'hey you', function(res){
//                console.log('Response is : "' + JSON.stringify(res));
//            });
//            nutella.net.request('channel_2', 'hey you', function(res){
//                console.log('Response is : "' + JSON.stringify(res));
//            });
//        });

</script>
</body>
</html>